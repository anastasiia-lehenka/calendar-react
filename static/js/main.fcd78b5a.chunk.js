(this["webpackJsonpcalendar-react"]=this["webpackJsonpcalendar-react"]||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),i=n(7),u=n.n(i),o=n(26),l=n(11),j=n(9),d=n(23),b=n(8),h=n(75),O=n(76),f=n(48),m=n(49),p=n(80),x=n(1),v=function(e){var t=e.name,n=e.users,a=e.hasDefaultOption,r=e.multiple,c=e.onChange,s=e.className,i=e.required,u=e.value;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(p.a.Control,{as:"select",custom:!0,"aria-describedby":"selectHelpBlock",className:s,onChange:c,multiple:r,required:i,value:u,name:t,children:[a&&Object(x.jsx)("option",{value:"All members",children:"All members"}),n&&n.map((function(e){return Object(x.jsx)("option",{value:e.name,children:e.name},e.name)}))]}),r&&Object(x.jsx)(p.a.Text,{id:"selectHelpBlock",muted:!0,children:"Press Ctrl to choose multiple participants."})]})},y=r.a.memo(v),g=n(50),k=n(74),N=Object(a.createContext)(null),w=(n(61),function(e){var t=e.onDeleteEvent,n=e.eventData,r=Object(a.useContext)(N),c=Object(j.a)(r,1)[0];return Object(x.jsxs)("div",{className:"event",children:[Object(x.jsx)("span",{className:"event__name",children:n.name}),c.admin&&Object(x.jsx)(m.a,{className:"event__delete-button",variant:"transparent",onClick:function(){return t(n)},children:Object(x.jsx)(k.a,{className:"icon"})})]})}),E=r.a.memo(w),C=["Mon","Tue","Wed","Thu","Fri"],_=["10.00","11.00","12.00","13.00","14.00","15.00","16.00","17.00","18.00"],S="user",D="success",T="error",A=(n(62),function(e){var t=e.events,n=e.onDeleteEvent,r=Object(a.useCallback)((function(e,t,n){return e&&e.find((function(e){return e.day===t&&e.time===n}))}),[]);return Object(x.jsxs)(g.a,{className:"calendar-table",bordered:!0,children:[Object(x.jsx)("thead",{className:"calendar-table__header",children:Object(x.jsxs)("tr",{className:"calendar-table__row",children:[Object(x.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:"Name"}),C.map((function(e){return Object(x.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:e},e)}))]})}),Object(x.jsx)("tbody",{children:_.map((function(e){return Object(x.jsxs)("tr",{className:"calendar-table__row",children:[Object(x.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:e},e),C.map((function(a){return Object(x.jsx)("td",{className:r(t,a,e)?"calendar-table__cell calendar-table__cell--event":"calendar-table__cell",children:r(t,a,e)&&Object(x.jsx)(E,{eventData:r(t,a,e),onDeleteEvent:n})},a)}))]},e)}))})]})}),H=r.a.memo(A),F=n(79),J=function(e){var t=e.event,n=e.deleteEvent,a=e.cancelDelete;return Object(x.jsxs)(F.a,{show:!0,centered:!0,onHide:a,children:[Object(x.jsx)(F.a.Header,{closeButton:!0,children:Object(x.jsx)(F.a.Title,{children:"Delete event"})}),Object(x.jsx)(F.a.Body,{children:Object(x.jsxs)("p",{children:['Are you sure you want to delete "',t.name,'" event?']})}),Object(x.jsxs)(F.a.Footer,{children:[Object(x.jsx)(m.a,{variant:"secondary",onClick:a,children:"No"}),Object(x.jsx)(m.a,{variant:"primary",onClick:function(){return n(t.id)},children:"Yes"})]})]})},q=(n(63),function(e){var t=e.users,n=e.events,r=e.eventToDelete,c=e.showDeleteModal,s=e.deleteEvent,i=e.cancelDelete,u=e.logOut,o=e.filterUsers,l=e.filter,b=Object(a.useContext)(N),p=Object(j.a)(b,1)[0];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(h.a,{fluid:!0,className:"wrapper pt-3",children:[Object(x.jsx)(O.a,{className:"mb-3",children:Object(x.jsxs)(f.a,{className:"auth-info d-flex justify-content-end align-items-center",children:[Object(x.jsxs)("p",{children:["You are logged in as ",Object(x.jsx)("strong",{children:p.name})]}),Object(x.jsx)(m.a,{variant:"danger",size:"sm",onClick:u,children:"Logout"})]})}),Object(x.jsxs)(O.a,{className:"mb-4",children:[Object(x.jsx)(f.a,{xs:12,md:6,children:Object(x.jsx)("h2",{className:"heading mb-3 mb-md-0",children:"Calendar"})}),Object(x.jsx)(f.a,{xs:12,md:6,children:Object(x.jsxs)("div",{className:"d-flex justify-content-md-end",children:[Object(x.jsx)(y,{className:"users-select",users:t,onChange:o,value:l,hasDefaultOption:!0}),p.admin&&Object(x.jsx)(d.b,{to:"/create-event",children:Object(x.jsx)(m.a,{className:"new-event-button btn-light",variant:"outline-secondary",role:"button",children:"New event +"})})]})})]}),Object(x.jsx)(H,{events:n,onDeleteEvent:c})]}),r&&Object(x.jsx)(J,{event:r,deleteEvent:s,cancelDelete:i})]})}),U=r.a.memo(q),G=n(34),B=n(45),L=y,P=n(81),R=n(77),I=(n(67),function(e){var t=e.onAlertDismiss;return Object(x.jsxs)(P.a,{className:"alert mb-5",variant:"danger",dismissible:!0,onClose:t,children:[Object(x.jsx)(R.a,{className:"alert__cross-icon"}),Object(x.jsx)("span",{children:"Failed to create an event. Time slot is already booked."})]})}),M=r.a.memo(I),z=(n(68),function(e){var t=e.users,n=e.createEvent,r=e.isExistingEvent,c=Object(a.useContext)(N),s=Object(j.a)(c,1)[0],i=Object(a.useState)({name:"",participants:[],day:C[0],time:_[0]}),o=Object(j.a)(i,2),v=o[0],y=o[1],g=Object(a.useState)(!1),k=Object(j.a)(g,2),w=k[0],E=k[1],S=Object(a.useState)(!1),D=Object(j.a)(S,2),T=D[0],A=D[1],H=Object(b.g)(),F=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),E(!1),r(v.day,v.time)){e.next=11;break}return A(!0),e.next=6,n(v);case 6:a=e.sent,A(!1),a&&H.push("/calendar"),e.next=12;break;case 11:E(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){E(!1),y((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(G.a)({},e.target.name,e.target.value))}))},q=Object(a.useCallback)((function(){E(!1)}),[]);return s?Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(h.a,{className:"create-event-form py-5 px-3",children:[w&&Object(x.jsx)(M,{onAlertDismiss:q}),Object(x.jsxs)(p.a,{onSubmit:F,children:[Object(x.jsxs)(p.a.Group,{as:O.a,className:"mb-3",controlId:"formGridText",children:[Object(x.jsx)(p.a.Label,{column:!0,sm:"4",md:"3",children:"Name of the event:"}),Object(x.jsx)(f.a,{sm:"8",md:"5",children:Object(x.jsx)(p.a.Control,{type:"text",name:"name",value:v.name,onChange:J,required:!0,maxLength:"50"})})]}),Object(x.jsxs)(p.a.Group,{as:O.a,className:"mb-3",children:[Object(x.jsx)(p.a.Label,{column:!0,sm:"4",md:"3",children:"Participants:"}),Object(x.jsx)(f.a,{sm:"8",md:"5",children:Object(x.jsx)(L,{name:"participants",users:t,multiple:!0,onChange:J,required:!0})})]}),Object(x.jsxs)(p.a.Group,{as:O.a,className:"mb-3",children:[Object(x.jsx)(p.a.Label,{column:!0,sm:"4",md:"3",children:"Day:"}),Object(x.jsx)(f.a,{sm:"8",md:"5",children:Object(x.jsx)(p.a.Control,{as:"select",name:"day",value:v.day,onChange:J,custom:!0,children:C.map((function(e){return Object(x.jsx)("option",{value:e,children:e},e)}))})})]}),Object(x.jsxs)(p.a.Group,{as:O.a,className:"mb-5",children:[Object(x.jsx)(p.a.Label,{column:!0,sm:"4",md:"3",children:"Time:"}),Object(x.jsx)(f.a,{sm:"8",md:"5",children:Object(x.jsx)(p.a.Control,{as:"select",name:"time",value:v.time,onChange:J,custom:!0,children:_.map((function(e){return Object(x.jsx)("option",{value:e,children:e},e)}))})})]}),Object(x.jsxs)(p.a.Group,{as:O.a,children:[Object(x.jsx)(f.a,{xs:"6",sm:{span:4,offset:4},md:{span:2,offset:8},children:Object(x.jsx)(d.b,{to:"/calendar",children:Object(x.jsx)(m.a,{type:"button",className:"button btn-outline-secondary me-2",variant:"light",children:"Cancel"})})}),Object(x.jsx)(f.a,{xs:"6",sm:"4",md:"2",children:Object(x.jsx)(m.a,{type:"submit",className:"button btn-outline-secondary",variant:"light",disabled:T,children:"Create"})})]})]})]})}):Object(x.jsx)(b.a,{to:"/calendar"})}),Y=r.a.memo(z),W=n(82),K=n(78),Q=(n(69),function(e){var t,n=e.data,r=Object(a.useState)(!0),c=Object(j.a)(r,2),s=c[0],i=c[1];return Object(x.jsx)(O.a,{children:Object(x.jsx)(f.a,{sm:{span:6,offset:6},md:{span:4,offset:8},children:Object(x.jsxs)(W.a,{className:"toast",show:s,onClose:function(){return i(!1)},delay:3e3,autohide:!0,children:[Object(x.jsxs)(W.a.Header,{children:[(t=n.type,t===D?Object(x.jsx)(K.a,{color:"green"}):t===T?Object(x.jsx)(R.a,{color:"red"}):void 0),Object(x.jsx)("strong",{className:"toast__type mr-auto",children:n.type.toUpperCase()})]}),Object(x.jsx)(W.a.Body,{children:n.text})]})})})}),V=r.a.memo(Q),X=function(e){var t=e.users,n=e.confirmAuth,r=Object(a.useState)(null),c=Object(j.a)(r,2),s=c[0],i=c[1];Object(a.useEffect)((function(){t&&i(t[0])}),[t]);var u=Object(a.useCallback)((function(e){var n=e.target.value,a=t.find((function(e){return e.name===n}));i(a)}),[t]);return Object(x.jsxs)(F.a,{className:"auth-modal",show:!0,backdrop:"static",keyboard:!1,centered:!0,children:[Object(x.jsx)(F.a.Header,{children:Object(x.jsx)(F.a.Title,{children:"Authorization"})}),Object(x.jsxs)(F.a.Body,{children:[Object(x.jsx)("p",{children:"Please authorise"}),Object(x.jsx)(y,{className:"auth-modal__select",onChange:u,users:t})]}),Object(x.jsx)(F.a.Footer,{children:Object(x.jsx)(m.a,{variant:"primary",onClick:function(){return n(s)},children:"Confirm"})})]})},Z=r.a.memo(X),$=n(35),ee=n(36),te=n(83),ne=new(function(){function e(){return Object($.a)(this,e),e.instance||(this.url="http://158.101.166.74:8080/api/data/anastasiia_lehenka",this.eventsEntity="events",this.usersEntity="users",e.instance=this),e.instance}return Object(ee.a)(e,[{key:"sendHttpRequest",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/").concat(n),{method:t,body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:if((r=e.sent).ok){e.next=6;break}throw c="".concat(r.status),new Error(c);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getEvents",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("GET",this.eventsEntity);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n&&n.map((function(e){return Object.assign(JSON.parse(e.data),{id:e.id})})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("POST",this.eventsEntity,{data:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",Object.assign(JSON.parse(a.data),{id:a.id}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("DELETE","".concat(this.eventsEntity,"/").concat(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("GET",this.usersEntity);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n&&n.map((function(e){return Object.assign(JSON.parse(e.data),{id:e.id})})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createUser",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("POST",this.usersEntity,{data:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",Object.assign(JSON.parse(a.data),{id:a.id}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());Object.freeze(ne);var ae=ne,re=new(function(){function e(t){Object($.a)(this,e),this.service=t}return Object(ee.a)(e,[{key:"getUsers",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,this.service.getUsers();case 4:t.data=e.sent,t.notification={id:Object(te.a)(),type:D,text:"Users loaded"},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.notification={id:Object(te.a)(),type:T,text:"Failed loading users. ".concat(e.t0)};case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getEvents",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,this.service.getEvents();case 4:t.data=e.sent,t.notification={id:Object(te.a)(),type:D,text:"Events loaded"},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.notification={id:Object(te.a)(),type:T,text:"Failed loading events. ".concat(e.t0)};case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"deleteEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,this.service.deleteEvent(t);case 4:n.data=!0,n.notification={id:Object(te.a)(),type:D,text:"Event deleted"},e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n.data=!1,n.notification={id:Object(te.a)(),type:T,text:"Failed to delete event. ".concat(e.t0)};case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,this.service.createEvent(t);case 4:n.data=e.sent,n.notification={id:Object(te.a)(),type:D,text:"Event created"},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n.notification={id:Object(te.a)(),type:T,text:"Failed creating event. ".concat(e.t0)};case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())(ae),ce=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(j.a)(c,2),i=s[0],O=s[1],f=Object(a.useState)([]),m=Object(j.a)(f,2),p=m[0],v=m[1],y=Object(a.useState)(null),g=Object(j.a)(y,2),k=g[0],w=g[1],E=Object(a.useState)(!0),C=Object(j.a)(E,2),_=C[0],D=C[1],T=Object(a.useState)("All members"),A=Object(j.a)(T,2),H=A[0],F=A[1];Object(a.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem(S));D(e)}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.getEvents();case 2:t=e.sent,r(t.data),v((function(e){return[].concat(Object(o.a)(e),[t.notification])}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.getUsers();case 2:t=e.sent,O(t.data),v((function(e){return[].concat(Object(o.a)(e),[t.notification])}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),e()}),[]);var J=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,re.createEvent(t);case 3:return(n=e.sent).data&&r((function(e){return e&&e.length?[].concat(Object(o.a)(e),[n.data]):[n.data]})),v((function(e){return[].concat(Object(o.a)(e),[n.notification])})),e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=Object(a.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(null),e.next=3,re.deleteEvent(t);case 3:(n=e.sent).data&&r((function(e){return e.filter((function(e){return e.id!==t}))})),v((function(e){return[].concat(Object(o.a)(e),[n.notification])}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),G=Object(a.useCallback)((function(e){w(e)}),[]),B=Object(a.useCallback)((function(){w(null)}),[]),L=Object(a.useCallback)((function(e){e&&(D(e),function(e){sessionStorage.setItem(S,JSON.stringify(e))}(e))}),[]),P=Object(a.useCallback)((function(){D(null),F("All members"),sessionStorage.removeItem(S)}),[]),R=Object(a.useCallback)((function(e){var t=e.target.value;F(t)}),[]),I=Object(a.useMemo)((function(){return[_,D]}),[_]),M=Object(a.useMemo)((function(){return"All members"!==H&&n?n.filter((function(e){return e.participants.includes(H)})):n}),[n,H]);return Object(x.jsx)(d.a,{basename:"/calendar-react",children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(N.Provider,{value:I,children:Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.b,{exact:!0,path:"/calendar",children:_?Object(x.jsx)(U,{users:i,events:M,showDeleteModal:G,eventToDelete:k,cancelDelete:B,deleteEvent:q,confirmAuth:L,logOut:P,filterUsers:R,filter:H}):Object(x.jsx)(Z,{confirmAuth:L,users:i})}),Object(x.jsx)(b.b,{exact:!0,path:"/create-event",children:Object(x.jsx)(Y,{users:i,isExistingEvent:function(e,t){return n&&n.find((function(n){return n.day===e&&n.time===t}))},createEvent:J})}),Object(x.jsx)(b.b,{path:"/",children:Object(x.jsx)(b.a,{to:"/calendar"})})]})}),p&&Object(x.jsx)(h.a,{className:"toast-container",children:p.map((function(e){return Object(x.jsx)(V,{data:e},e.id)}))})]})})};n(70);s.a.render(Object(x.jsx)(ce,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.fcd78b5a.chunk.js.map