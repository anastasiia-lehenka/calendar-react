(this["webpackJsonpcalendar-react"]=this["webpackJsonpcalendar-react"]||[]).push([[0],{61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),i=n(7),u=n.n(i),o=n(26),l=n(11),j=n(9),d=n(23),b=n(8),h=n(75),O=n(76),f=n(48),m=n(49),p=n(80),v=n(1),x=function(e){var t=e.users,n=e.hasDefaultOption,a=e.multiple,r=e.onChange,c=e.className,s=e.required,i=e.value;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(p.a.Control,{as:"select",custom:!0,"aria-describedby":"selectHelpBlock",className:c,onChange:r,multiple:a,required:s,value:i,children:[n&&Object(v.jsx)("option",{value:"All members",children:"All members"}),t&&t.map((function(e){return Object(v.jsx)("option",{value:e.name,children:e.name},e.name)}))]}),a&&Object(v.jsx)(p.a.Text,{id:"selectHelpBlock",muted:!0,children:"Press Ctrl to choose multiple participants."})]})},y=r.a.memo(x),g=n(50),k=n(74),N=Object(a.createContext)(null),w=(n(61),function(e){var t=e.onDeleteEvent,n=e.eventData,r=Object(a.useContext)(N),c=Object(j.a)(r,1)[0];return Object(v.jsxs)("div",{className:"event",children:[Object(v.jsx)("span",{className:"event__name",children:n.name}),c.admin&&Object(v.jsx)(m.a,{className:"event__delete-button",variant:"transparent",onClick:function(){return t(n)},children:Object(v.jsx)(k.a,{className:"icon"})})]})}),E=r.a.memo(w),C=["Mon","Tue","Wed","Thu","Fri"],_=["10.00","11.00","12.00","13.00","14.00","15.00","16.00","17.00","18.00"],S="user",D="calendar-react",T="success",A="error",H=(n(62),function(e){var t=e.events,n=e.onDeleteEvent,r=Object(a.useCallback)((function(e,t,n){return e&&e.find((function(e){return e.day===t&&e.time===n}))}),[]);return Object(v.jsxs)(g.a,{className:"calendar-table",bordered:!0,children:[Object(v.jsx)("thead",{className:"calendar-table__header",children:Object(v.jsxs)("tr",{className:"calendar-table__row",children:[Object(v.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:"Name"}),C.map((function(e){return Object(v.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:e},e)}))]})}),Object(v.jsx)("tbody",{children:_.map((function(e){return Object(v.jsxs)("tr",{className:"calendar-table__row",children:[Object(v.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:e},e),C.map((function(a){return Object(v.jsx)("td",{className:r(t,a,e)?"calendar-table__cell calendar-table__cell--event":"calendar-table__cell",children:r(t,a,e)&&Object(v.jsx)(E,{eventData:r(t,a,e),onDeleteEvent:n})},a)}))]},e)}))})]})}),F=r.a.memo(H),J=n(79),q=function(e){var t=e.event,n=e.deleteEvent,a=e.cancelDelete;return Object(v.jsxs)(J.a,{show:!0,centered:!0,onHide:a,children:[Object(v.jsx)(J.a.Header,{closeButton:!0,children:Object(v.jsx)(J.a.Title,{children:"Delete event"})}),Object(v.jsx)(J.a.Body,{children:Object(v.jsxs)("p",{children:['Are you sure you want to delete "',t.name,'" event?']})}),Object(v.jsxs)(J.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",onClick:a,children:"No"}),Object(v.jsx)(m.a,{variant:"primary",onClick:function(){return n(t.id)},children:"Yes"})]})]})},U=(n(63),function(e){var t=e.users,n=e.events,r=e.eventToDelete,c=e.showDeleteModal,s=e.deleteEvent,i=e.cancelDelete,u=e.logOut,o=e.filterUsers,l=e.filter,b=Object(a.useContext)(N),p=Object(j.a)(b,1)[0];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(h.a,{fluid:!0,className:"wrapper pt-3",children:[Object(v.jsx)(O.a,{className:"mb-3",children:Object(v.jsxs)(f.a,{className:"auth-info d-flex justify-content-end align-items-center",children:[Object(v.jsxs)("p",{children:["You are logged in as ",Object(v.jsx)("strong",{children:p.name})]}),Object(v.jsx)(m.a,{variant:"danger",size:"sm",onClick:u,children:"Logout"})]})}),Object(v.jsxs)(O.a,{className:"mb-4",children:[Object(v.jsx)(f.a,{xs:12,md:6,children:Object(v.jsx)("h2",{className:"heading mb-3 mb-md-0",children:"Calendar"})}),Object(v.jsx)(f.a,{xs:12,md:6,children:Object(v.jsxs)("div",{className:"d-flex justify-content-md-end",children:[Object(v.jsx)(y,{className:"users-select",users:t,onChange:o,value:l,hasDefaultOption:!0}),p.admin&&Object(v.jsx)(d.b,{to:"/".concat(D,"/create-event"),children:Object(v.jsx)(m.a,{className:"new-event-button btn-light",variant:"outline-secondary",role:"button",children:"New event +"})})]})})]}),Object(v.jsx)(F,{events:n,onDeleteEvent:c})]}),r&&Object(v.jsx)(q,{event:r,deleteEvent:s,cancelDelete:i})]})}),G=r.a.memo(U),B=n(34),L=n(45),P=y,R=n(81),I=n(77),M=(n(67),function(e){var t=e.onAlertDismiss;return Object(v.jsxs)(R.a,{className:"alert mb-5",variant:"danger",dismissible:!0,onClose:t,children:[Object(v.jsx)(I.a,{className:"alert__cross-icon"}),Object(v.jsx)("span",{children:"Failed to create an event. Time slot is already booked."})]})}),z=r.a.memo(M),Y=(n(68),function(e){var t=e.users,n=e.createEvent,r=e.isExistingEvent,c=Object(a.useState)({name:"",participants:[],day:C[0],time:_[0]}),s=Object(j.a)(c,2),i=s[0],o=s[1],x=Object(a.useState)(!1),y=Object(j.a)(x,2),g=y[0],k=y[1],N=Object(a.useState)(!1),w=Object(j.a)(N,2),E=w[0],S=w[1],T=Object(b.f)(),A=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k(!1),r(i.day,i.time)){e.next=11;break}return S(!0),e.next=6,n(i);case 6:a=e.sent,S(!1),a&&T.push("/".concat(D,"/calendar")),e.next=12;break;case 11:k(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e){k(!1),o((function(t){return Object(L.a)(Object(L.a)({},t),{},Object(B.a)({},e.target.name,e.target.value))}))},F=Object(a.useCallback)((function(){k(!1)}),[]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(h.a,{className:"create-event-form py-5 px-3",children:[g&&Object(v.jsx)(z,{onAlertDismiss:F}),Object(v.jsxs)(p.a,{onSubmit:A,children:[Object(v.jsxs)(p.a.Group,{as:O.a,className:"mb-3",controlId:"formGridText",children:[Object(v.jsx)(p.a.Label,{column:!0,sm:"4",md:"3",children:"Name of the event:"}),Object(v.jsx)(f.a,{sm:"8",md:"5",children:Object(v.jsx)(p.a.Control,{type:"text",name:"name",value:i.name,onChange:H,required:!0,maxLength:"50"})})]}),Object(v.jsxs)(p.a.Group,{as:O.a,className:"mb-3",children:[Object(v.jsx)(p.a.Label,{column:!0,sm:"4",md:"3",children:"Participants:"}),Object(v.jsx)(f.a,{sm:"8",md:"5",children:Object(v.jsx)(P,{name:"participants",users:t,multiple:!0,onChange:H,required:!0})})]}),Object(v.jsxs)(p.a.Group,{as:O.a,className:"mb-3",children:[Object(v.jsx)(p.a.Label,{column:!0,sm:"4",md:"3",children:"Day:"}),Object(v.jsx)(f.a,{sm:"8",md:"5",children:Object(v.jsx)(p.a.Control,{as:"select",name:"day",value:i.day,onChange:H,custom:!0,children:C.map((function(e){return Object(v.jsx)("option",{value:e,children:e},e)}))})})]}),Object(v.jsxs)(p.a.Group,{as:O.a,className:"mb-5",children:[Object(v.jsx)(p.a.Label,{column:!0,sm:"4",md:"3",children:"Time:"}),Object(v.jsx)(f.a,{sm:"8",md:"5",children:Object(v.jsx)(p.a.Control,{as:"select",name:"time",value:i.time,onChange:H,custom:!0,children:_.map((function(e){return Object(v.jsx)("option",{value:e,children:e},e)}))})})]}),Object(v.jsxs)(p.a.Group,{as:O.a,children:[Object(v.jsx)(f.a,{xs:"6",sm:{span:4,offset:4},md:{span:2,offset:8},children:Object(v.jsx)(d.b,{to:"/".concat(D,"/calendar"),children:Object(v.jsx)(m.a,{type:"button",className:"btn-outline-secondary me-2",variant:"light",children:"Cancel"})})}),Object(v.jsx)(f.a,{xs:"6",sm:"4",md:"2",children:Object(v.jsx)(m.a,{type:"submit",className:"btn-outline-secondary",variant:"light",disabled:E,children:"Create"})})]})]})]})})}),W=r.a.memo(Y),K=n(82),Q=n(78),V=(n(69),function(e){var t,n=e.data,r=Object(a.useState)(!0),c=Object(j.a)(r,2),s=c[0],i=c[1];return Object(v.jsx)(O.a,{children:Object(v.jsx)(f.a,{sm:{span:6,offset:6},md:{span:4,offset:8},children:Object(v.jsxs)(K.a,{className:"toast",show:s,onClose:function(){return i(!1)},delay:3e3,autohide:!0,children:[Object(v.jsxs)(K.a.Header,{children:[(t=n.type,t===T?Object(v.jsx)(Q.a,{color:"green"}):t===A?Object(v.jsx)(I.a,{color:"red"}):void 0),Object(v.jsx)("strong",{className:"toast__type mr-auto",children:n.type.toUpperCase()})]}),Object(v.jsx)(K.a.Body,{children:n.text})]})})})}),X=r.a.memo(V),Z=function(e){var t=e.users,n=e.confirmAuth,r=Object(a.useState)(null),c=Object(j.a)(r,2),s=c[0],i=c[1];Object(a.useEffect)((function(){t&&i(t[0])}),[t]);var u=Object(a.useCallback)((function(e){var n=e.target.value,a=t.find((function(e){return e.name===n}));i(a)}),[t]);return Object(v.jsxs)(J.a,{className:"auth-modal",show:!0,backdrop:"static",keyboard:!1,centered:!0,children:[Object(v.jsx)(J.a.Header,{children:Object(v.jsx)(J.a.Title,{children:"Authorization"})}),Object(v.jsxs)(J.a.Body,{children:[Object(v.jsx)("p",{children:"Please authorise"}),Object(v.jsx)(y,{className:"auth-modal__select",onChange:u,users:t})]}),Object(v.jsx)(J.a.Footer,{children:Object(v.jsx)(m.a,{variant:"primary",onClick:function(){return n(s)},children:"Confirm"})})]})},$=r.a.memo(Z),ee=n(35),te=n(36),ne=n(83),ae=new(function(){function e(){return Object(ee.a)(this,e),e.instance||(this.url="http://158.101.166.74:8080/api/data/anastasiia_lehenka",this.eventsEntity="events",this.usersEntity="users",e.instance=this),e.instance}return Object(te.a)(e,[{key:"sendHttpRequest",value:function(){var e=Object(l.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/").concat(n),{method:t,body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:if((r=e.sent).ok){e.next=6;break}throw c="".concat(r.status),new Error(c);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getEvents",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("GET",this.eventsEntity);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n&&n.map((function(e){return Object.assign(JSON.parse(e.data),{id:e.id})})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("POST",this.eventsEntity,{data:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",Object.assign(JSON.parse(a.data),{id:a.id}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("DELETE","".concat(this.eventsEntity,"/").concat(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("GET",this.usersEntity);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n&&n.map((function(e){return Object.assign(JSON.parse(e.data),{id:e.id})})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createUser",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("POST",this.usersEntity,{data:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",Object.assign(JSON.parse(a.data),{id:a.id}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());Object.freeze(ae);var re=ae,ce=new(function(){function e(t){Object(ee.a)(this,e),this.service=t}return Object(te.a)(e,[{key:"getUsers",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,this.service.getUsers();case 4:t.data=e.sent,t.notification={id:Object(ne.a)(),type:T,text:"Users loaded"},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.notification={id:Object(ne.a)(),type:A,text:"Failed loading users. ".concat(e.t0)};case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getEvents",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,this.service.getEvents();case 4:t.data=e.sent,t.notification={id:Object(ne.a)(),type:T,text:"Events loaded"},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.notification={id:Object(ne.a)(),type:A,text:"Failed loading events. ".concat(e.t0)};case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"deleteEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,this.service.deleteEvent(t);case 4:n.data=!0,n.notification={id:Object(ne.a)(),type:T,text:"Event deleted"},e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n.data=!1,n.notification={id:Object(ne.a)(),type:A,text:"Failed to delete event. ".concat(e.t0)};case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createEvent",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,this.service.createEvent(t);case 4:n.data=e.sent,n.notification={id:Object(ne.a)(),type:T,text:"Event created"},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n.notification={id:Object(ne.a)(),type:A,text:"Failed creating event. ".concat(e.t0)};case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())(re),se=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(j.a)(c,2),i=s[0],O=s[1],f=Object(a.useState)([]),m=Object(j.a)(f,2),p=m[0],x=m[1],y=Object(a.useState)(null),g=Object(j.a)(y,2),k=g[0],w=g[1],E=Object(a.useState)(null),C=Object(j.a)(E,2),_=C[0],T=C[1],A=Object(a.useState)("All members"),H=Object(j.a)(A,2),F=H[0],J=H[1];Object(a.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem(S));e&&T(e)}),[]),Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getEvents();case 2:t=e.sent,r(t.data),x((function(e){return[].concat(Object(o.a)(e),[t.notification])}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.getUsers();case 2:t=e.sent,O(t.data),x((function(e){return[].concat(Object(o.a)(e),[t.notification])}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),e()}),[]);var q=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.createEvent(t);case 2:return(n=e.sent).data&&r((function(e){return e&&e.length?[].concat(Object(o.a)(e),[n.data]):[n.data]})),x((function(e){return[].concat(Object(o.a)(e),[n.notification])})),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=Object(a.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(null),e.next=3,ce.deleteEvent(t);case 3:(n=e.sent).data&&r((function(e){return e.filter((function(e){return e.id!==t}))})),x((function(e){return[].concat(Object(o.a)(e),[n.notification])}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),B=Object(a.useCallback)((function(e){w(e)}),[]),L=Object(a.useCallback)((function(){w(null)}),[]),P=Object(a.useCallback)((function(e){e&&(T(e),function(e){sessionStorage.setItem(S,JSON.stringify(e))}(e))}),[]),R=Object(a.useCallback)((function(){T(null),J("All members"),sessionStorage.removeItem(S)}),[]),I=Object(a.useCallback)((function(e){var t=e.target.value;J(t)}),[]),M=Object(a.useMemo)((function(){return[_,T]}),[_]),z=Object(a.useMemo)((function(){return"All members"!==F&&n?n.filter((function(e){return e.participants.includes(F)})):n}),[n,F]);return Object(v.jsx)(d.a,{children:Object(v.jsxs)("div",{className:"App",children:[_?Object(v.jsxs)(b.c,{children:[Object(v.jsx)(b.a,{path:"/".concat(D,"/calendar"),children:Object(v.jsx)(N.Provider,{value:M,children:Object(v.jsx)(G,{users:i,events:z,showDeleteModal:B,eventToDelete:k,cancelDelete:L,deleteEvent:U,confirmAuth:P,logOut:R,filterUsers:I,filter:F})})}),Object(v.jsx)(b.a,{path:"/".concat(D,"/create-event"),children:Object(v.jsx)(W,{users:i,isExistingEvent:function(e,t){return n&&n.find((function(n){return n.day===e&&n.time===t}))},createEvent:q})})]}):Object(v.jsx)($,{confirmAuth:P,users:i}),p&&Object(v.jsx)(h.a,{className:"toast-container",children:p.map((function(e){return Object(v.jsx)(X,{data:e},e.id)}))})]})})};n(70);s.a.render(Object(v.jsx)(se,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.c997c721.chunk.js.map