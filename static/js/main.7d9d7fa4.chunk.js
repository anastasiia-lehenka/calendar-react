(this["webpackJsonpcalendar-react"]=this["webpackJsonpcalendar-react"]||[]).push([[0],{70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),i=n(11),o=n(24),l=n(52),u=n(39),d=n(7),j="GET_EVENTS_REQUEST",b="GET_EVENTS_SUCCESS",O="GET_EVENTS_FAILURE",p="ADD_EVENT_REQUEST",h="ADD_EVENT_SUCCESS",m="ADD_EVENT_FAILURE",f="DELETE_EVENT_REQUEST",x="DELETE_EVENT_SUCCESS",v="DELETE_EVENT_FAILURE",y="CHANGE_EVENT_TO_DELETE",E="CHANGE_EVENTS_FILTER",_={events:[],filter:"All members",loading:!1,eventToDelete:null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case b:return Object(d.a)(Object(d.a)({},e),{},{events:t.payload,loading:!1,error:""});case O:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload});case p:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case h:return Object(d.a)(Object(d.a)({},e),{},{events:[].concat(Object(u.a)(e.events),[t.payload]),loading:!1,error:""});case m:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload});case f:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case x:return Object(d.a)(Object(d.a)({},e),{},{events:e.events.filter((function(e){return e.id!==t.payload})),loading:!1,error:""});case v:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload});case y:return Object(d.a)(Object(d.a)({},e),{},{eventToDelete:t.payload});case E:return Object(d.a)(Object(d.a)({},e),{},{filter:t.payload});default:return e}},g="GET_USERS_REQUEST",S="GET_USERS_SUCCESS",T="GET_USERS_FAILURE",C="CHANGE_CURRENT_USER",w={users:[],loading:!1,currentUser:{}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case S:return Object(d.a)(Object(d.a)({},e),{},{users:t.payload,loading:!1,error:""});case T:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload});case C:return Object(d.a)(Object(d.a)({},e),{},{currentUser:t.payload});default:return e}},D="ADD_NOTIFICATION",U={notifications:[]},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(d.a)(Object(d.a)({},e),{},{notifications:[].concat(Object(u.a)(e.notifications),[t.payload])});default:return e}},R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,F=Object(o.e)(Object(o.c)({events:N,users:k,notifications:A}),R(Object(o.a)(l.a))),G=n(26),L=n(9),H=n(81),I=n(82),V=n(55),J=n(56),q=n(8),B=n.n(q),M=n(14),P=n(89),Q=n(53),z=n(54),X=["Mon","Tue","Wed","Thu","Fri"],Y=["10.00","11.00","12.00","13.00","14.00","15.00","16.00","17.00","18.00"],W="user",K="success",Z="error",$=new(function(){function e(){return Object(Q.a)(this,e),e.instance||(this.url="http://158.101.166.74:8080/api/data/anastasiia_lehenka",this.eventsEntity="events",this.usersEntity="users",e.instance=this),e.instance}return Object(z.a)(e,[{key:"sendHttpRequest",value:function(){var e=Object(M.a)(B.a.mark((function e(t,n,a){var r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.url,"/").concat(n),{method:t,body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:if((r=e.sent).ok){e.next=6;break}throw c="".concat(r.status),new Error(c);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getEvents",value:function(){var e=Object(M.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("GET",this.eventsEntity);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n&&n.map((function(e){return Object(d.a)({id:e.id},JSON.parse(e.data))})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createEvent",value:function(){var e=Object(M.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("POST",this.eventsEntity,{data:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",Object(d.a)({id:a.id},JSON.parse(a.data)));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteEvent",value:function(){var e=Object(M.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("DELETE","".concat(this.eventsEntity,"/").concat(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(M.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("GET",this.usersEntity);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n&&n.map((function(e){return Object(d.a)({id:e.id},JSON.parse(e.data))})));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createUser",value:function(){var e=Object(M.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendHttpRequest("POST",this.usersEntity,{data:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",Object(d.a)({id:a.id},JSON.parse(a.data)));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());Object.freeze($);var ee=$,te=function(e){return{type:D,payload:e}},ne=function(e){return{type:O,payload:e}},ae=function(e){return{type:h,payload:e}},re=function(e){return{type:m,payload:e}},ce=function(e){return{type:x,payload:e}},se=function(e){return{type:v,payload:e}},ie=function(e){return{type:y,payload:e}},oe=function(e){return{type:E,payload:e}},le=function(e){return{type:T,payload:e}},ue=function(e){return{type:C,payload:e}},de=n(86),je=n(1),be=function(e){var t=e.name,n=e.users,a=e.hasDefaultOption,r=e.multiple,c=e.onChange,s=e.className,i=e.required,o=e.value;return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)(de.a.Control,{as:"select",custom:!0,"aria-describedby":"selectHelpBlock",className:s,onChange:c,multiple:r,required:i,value:o,name:t,children:[a&&Object(je.jsx)("option",{value:"All members",children:"All members"}),n&&n.map((function(e){return Object(je.jsx)("option",{value:e.name,children:e.name},e.name)}))]}),r&&Object(je.jsx)(de.a.Text,{id:"selectHelpBlock",muted:!0,children:"Press Ctrl to choose multiple participants."})]})},Oe=r.a.memo(be),pe=n(57),he=n(80),me=(n(70),function(e){var t=e.showDeleteModal,n=e.eventData,a=e.currentUser;return Object(je.jsxs)("div",{className:"event",children:[Object(je.jsx)("span",{className:"event__name",children:n.name}),a.admin&&Object(je.jsx)(J.a,{className:"event__delete-button",variant:"transparent",onClick:function(){return t(n)},children:Object(je.jsx)(he.a,{className:"icon"})})]})}),fe=r.a.memo(me),xe=(n(71),function(e){var t=e.currentUser,n=e.events,r=e.showDeleteModal,c=Object(a.useCallback)((function(e,t,n){return e&&e.find((function(e){return e.day===t&&e.time===n}))}),[]);return Object(je.jsxs)(pe.a,{className:"calendar-table",bordered:!0,children:[Object(je.jsx)("thead",{className:"calendar-table__header",children:Object(je.jsxs)("tr",{className:"calendar-table__row",children:[Object(je.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:"Name"}),X.map((function(e){return Object(je.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:e},e)}))]})}),Object(je.jsx)("tbody",{children:Y.map((function(e){return Object(je.jsxs)("tr",{className:"calendar-table__row",children:[Object(je.jsx)("th",{className:"calendar-table__cell calendar-table__cell--heading",children:e},e),X.map((function(a){return Object(je.jsx)("td",{className:c(n,a,e)?"calendar-table__cell calendar-table__cell--event":"calendar-table__cell",children:c(n,a,e)&&Object(je.jsx)(fe,{showDeleteModal:r,currentUser:t,eventData:c(n,a,e)})},a)}))]},e)}))})]})}),ve=r.a.memo(xe),ye=n(85),Ee=function(e){var t=e.event,n=e.deleteEvent,a=e.cancelDelete;return Object(je.jsxs)(ye.a,{show:!0,centered:!0,onHide:a,children:[Object(je.jsx)(ye.a.Header,{closeButton:!0,children:Object(je.jsx)(ye.a.Title,{children:"Delete event"})}),Object(je.jsx)(ye.a.Body,{children:Object(je.jsxs)("p",{children:['Are you sure you want to delete "',t.name,'" event?']})}),Object(je.jsxs)(ye.a.Footer,{children:[Object(je.jsx)(J.a,{variant:"secondary",onClick:a,children:"No"}),Object(je.jsx)(J.a,{variant:"primary",onClick:function(){return n(t.id)},children:"Yes"})]})]})},_e=n(23),Ne=function(e){var t=e.users,n=e.confirmAuth,r=Object(a.useState)(null),c=Object(_e.a)(r,2),s=c[0],i=c[1];Object(a.useEffect)((function(){t&&i(t[0])}),[t]);var o=Object(a.useCallback)((function(e){var n=e.target.value,a=t.find((function(e){return e.name===n}));i(a)}),[t]);return Object(je.jsxs)(ye.a,{className:"auth-modal",show:!0,backdrop:"static",keyboard:!1,centered:!0,children:[Object(je.jsx)(ye.a.Header,{children:Object(je.jsx)(ye.a.Title,{children:"Authorization"})}),Object(je.jsxs)(ye.a.Body,{children:[Object(je.jsx)("p",{children:"Please authorise"}),Object(je.jsx)(Oe,{className:"auth-modal__select",onChange:o,users:t})]}),Object(je.jsx)(ye.a.Footer,{children:Object(je.jsx)(J.a,{variant:"primary",onClick:function(){return n(s)},children:"Confirm"})})]})},ge=r.a.memo(Ne),Se=(n(72),function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.users.users})),n=Object(i.c)((function(e){return e.users.currentUser})),r=Object(i.c)((function(e){return e.events.events})),c=Object(i.c)((function(e){return e.events.filter})),s=Object(i.c)((function(e){return e.events.eventToDelete})),o=Object(a.useMemo)((function(){return"All members"!==c&&r?r.filter((function(e){return e.participants.includes(c)})):r}),[r,c]),l=Object(a.useCallback)((function(t){return e(oe(t.target.value))}),[e]),u=Object(a.useCallback)((function(t){return e(ie(t))}),[e]);return n?Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)(H.a,{fluid:!0,className:"wrapper pt-3",children:[Object(je.jsx)(I.a,{className:"mb-3",children:Object(je.jsxs)(V.a,{className:"auth-info d-flex justify-content-end align-items-center",children:[Object(je.jsxs)("p",{children:["You are logged in as ",Object(je.jsx)("strong",{children:n.name})]}),Object(je.jsx)(J.a,{variant:"danger",size:"sm",onClick:function(){e(ue(null)),sessionStorage.removeItem(W)},children:"Logout"})]})}),Object(je.jsxs)(I.a,{className:"mb-4",children:[Object(je.jsx)(V.a,{xs:12,md:6,children:Object(je.jsx)("h2",{className:"heading mb-3 mb-md-0",children:"Calendar"})}),n.admin&&Object(je.jsx)(V.a,{xs:12,md:6,children:Object(je.jsxs)("div",{className:"d-flex justify-content-md-end",children:[Object(je.jsx)(Oe,{className:"users-select",users:t,onChange:l,value:c,hasDefaultOption:!0}),Object(je.jsx)(G.b,{to:"/create-event",children:Object(je.jsx)(J.a,{className:"new-event-button btn-light",variant:"outline-secondary",role:"button",children:"New event +"})})]})})]}),Object(je.jsx)(ve,{currentUser:n,events:o,showDeleteModal:u})]}),s&&Object(je.jsx)(Ee,{event:s,deleteEvent:function(t){var n;e((n=t,function(){var e=Object(M.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:f}),e.prev=1,e.next=4,ee.deleteEvent(n);case 4:t(ce(n)),t(te({id:Object(P.a)(),type:K,text:"Event deleted"})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(se(e.t0)),t(te({id:Object(P.a)(),type:Z,text:"Failed to delete event. ".concat(e.t0)}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),e(ie(null))},cancelDelete:function(){return e(ie(null))}})]}):Object(je.jsx)(ge,{confirmAuth:function(t){t&&(e(ue(t)),function(e){sessionStorage.setItem(W,JSON.stringify(e))}(t),t.admin?e(oe("All members")):e(oe(t.name)))},users:t})}),Te=r.a.memo(Se),Ce=n(34),we=Oe,ke=n(87),De=n(83),Ue=(n(74),function(e){var t=e.onAlertDismiss;return Object(je.jsxs)(ke.a,{className:"alert mb-5",variant:"danger",dismissible:!0,onClose:t,children:[Object(je.jsx)(De.a,{className:"alert__cross-icon"}),Object(je.jsx)("span",{children:"Failed to create an event. Time slot is already booked."})]})}),Ae=r.a.memo(Ue),Re=(n(75),function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.users.users})),n=Object(i.c)((function(e){return e.users.currentUser})),r=Object(i.c)((function(e){return e.events.events})),c=Object(i.c)((function(e){return e.events.loading})),s=Object(a.useState)({name:"",participants:[],day:X[0],time:Y[0]}),o=Object(_e.a)(s,2),l=o[0],u=o[1],j=Object(a.useState)(!1),b=Object(_e.a)(j,2),O=b[0],h=b[1],m=Object(L.g)(),f=Object(a.useCallback)((function(e){h(!1),u((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(Ce.a)({},e.target.name,e.target.value))}))}),[]),x=Object(a.useCallback)((function(){h(!1)}),[]);return n?Object(je.jsx)(je.Fragment,{children:Object(je.jsxs)(H.a,{className:"create-event-form py-5 px-3",children:[O&&Object(je.jsx)(Ae,{onAlertDismiss:x}),Object(je.jsxs)(de.a,{onSubmit:function(t){var n,a,c,s;t.preventDefault(),a=r,c=l.day,s=l.time,a&&a.find((function(e){return e.day===c&&e.time===s}))?h(!0):(e((n=l,function(){var e=Object(M.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:p}),e.prev=1,e.next=4,ee.createEvent(n);case 4:a=e.sent,t(ae(a)),t(te({id:Object(P.a)(),type:K,text:"Event created"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t(re(e.t0)),t(te({id:Object(P.a)(),type:Z,text:"Failed to create event. ".concat(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())),m.push("/calendar"))},children:[Object(je.jsxs)(de.a.Group,{as:I.a,className:"mb-3",controlId:"formGridText",children:[Object(je.jsx)(de.a.Label,{column:!0,sm:"4",md:"3",children:"Name of the event:"}),Object(je.jsx)(V.a,{sm:"8",md:"5",children:Object(je.jsx)(de.a.Control,{type:"text",name:"name",value:l.name,onChange:f,required:!0,maxLength:"50"})})]}),Object(je.jsxs)(de.a.Group,{as:I.a,className:"mb-3",children:[Object(je.jsx)(de.a.Label,{column:!0,sm:"4",md:"3",children:"Participants:"}),Object(je.jsx)(V.a,{sm:"8",md:"5",children:Object(je.jsx)(we,{name:"participants",users:t,multiple:!0,onChange:f,required:!0})})]}),Object(je.jsxs)(de.a.Group,{as:I.a,className:"mb-3",children:[Object(je.jsx)(de.a.Label,{column:!0,sm:"4",md:"3",children:"Day:"}),Object(je.jsx)(V.a,{sm:"8",md:"5",children:Object(je.jsx)(de.a.Control,{as:"select",name:"day",value:l.day,onChange:f,custom:!0,children:X.map((function(e){return Object(je.jsx)("option",{value:e,children:e},e)}))})})]}),Object(je.jsxs)(de.a.Group,{as:I.a,className:"mb-5",children:[Object(je.jsx)(de.a.Label,{column:!0,sm:"4",md:"3",children:"Time:"}),Object(je.jsx)(V.a,{sm:"8",md:"5",children:Object(je.jsx)(de.a.Control,{as:"select",name:"time",value:l.time,onChange:f,custom:!0,children:Y.map((function(e){return Object(je.jsx)("option",{value:e,children:e},e)}))})})]}),Object(je.jsxs)(de.a.Group,{as:I.a,children:[Object(je.jsx)(V.a,{xs:"6",sm:{span:4,offset:4},md:{span:2,offset:8},children:Object(je.jsx)(G.b,{to:"/calendar",children:Object(je.jsx)(J.a,{type:"button",className:"button btn-outline-secondary me-2",variant:"light",children:"Cancel"})})}),Object(je.jsx)(V.a,{xs:"6",sm:"4",md:"2",children:Object(je.jsx)(J.a,{type:"submit",className:"button btn-outline-secondary",variant:"light",disabled:c,children:"Create"})})]})]})]})}):Object(je.jsx)(L.a,{to:"/calendar"})}),Fe=r.a.memo(Re),Ge=n(88),Le=n(84),He=(n(76),function(e){var t,n=e.data,r=Object(a.useState)(!0),c=Object(_e.a)(r,2),s=c[0],i=c[1];return Object(je.jsx)(I.a,{children:Object(je.jsx)(V.a,{sm:{span:6,offset:6},md:{span:4,offset:8},children:Object(je.jsxs)(Ge.a,{className:"toast",show:s,onClose:function(){return i(!1)},delay:3e3,autohide:!0,children:[Object(je.jsxs)(Ge.a.Header,{children:[(t=n.type,t===K?Object(je.jsx)(Le.a,{color:"green"}):t===Z?Object(je.jsx)(De.a,{color:"red"}):void 0),Object(je.jsx)("strong",{className:"toast__type mr-auto",children:n.type.toUpperCase()})]}),Object(je.jsx)(Ge.a.Body,{children:n.text})]})})})}),Ie=r.a.memo(He),Ve=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.notifications.notifications}));return Object(a.useEffect)((function(){var t=JSON.parse(sessionStorage.getItem(W));e(ue(t||null))}),[e]),Object(a.useEffect)((function(){e(function(){var e=Object(M.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:j}),e.prev=1,e.next=4,ee.getEvents();case 4:n=e.sent,t({type:b,payload:n}),t(te({id:Object(P.a)(),type:K,text:"Events loaded"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t(ne(e.t0)),t(te({id:Object(P.a)(),type:Z,text:"Failed to get event. ".concat(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(M.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:g}),e.prev=1,e.next=4,ee.getUsers();case 4:n=e.sent,t({type:S,payload:n}),t(te({id:Object(P.a)(),type:K,text:"Users loaded"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t(le(e.t0)),t(te({id:Object(P.a)(),type:Z,text:"Failed to load users. ".concat(e.t0)}));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(je.jsx)("div",{className:"App",children:Object(je.jsxs)(G.a,{basename:"/calendar-react",children:[Object(je.jsxs)(L.d,{children:[Object(je.jsx)(L.b,{exact:!0,path:"/calendar",component:Te}),Object(je.jsx)(L.b,{exact:!0,path:"/create-event",component:Fe}),Object(je.jsx)(L.b,{path:"/",children:Object(je.jsx)(L.a,{to:"/calendar"})})]}),Object(je.jsx)(H.a,{className:"toast-container",children:t.map((function(e){return Object(je.jsx)(Ie,{data:e},e.id)}))})]})})};n(77);s.a.render(Object(je.jsx)(i.a,{store:F,children:Object(je.jsx)(Ve,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.7d9d7fa4.chunk.js.map